<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Perfil - Tienda de Juegos</title>
  <link rel="stylesheet" href="../styles/style.css" />
</head>
<body>
  <main class="profile-page">
    <div class="profile-card">
      <h2>Mi perfil</h2>
      <div id="profileInfo"></div>
      <div class="profile-actions">
        <button id="logoutBtn" class="btn">Cerrar sesión</button>
        <a href="../index.html" class="btn">Volver a la tienda</a>
      </div>
    </div>
  </main>

  <script type="module">
    // Simple profile page
    const profileInfo = document.getElementById('profileInfo');
    const logoutBtn = document.getElementById('logoutBtn');

    function loadProfile() {
      const session = JSON.parse(localStorage.getItem('session') || 'null');
      if (!session) {
        location.href = 'login.html';
        return;
      }
      profileInfo.innerHTML = `
        <p><strong>Usuario:</strong> ${session.usuario}</p>
        <p><strong>Nombre:</strong> ${session.nombre || '—'}</p>
        <p><strong>Logueado desde:</strong> ${new Date(session.timestamp).toLocaleString()}</p>
      `;
    }

    logoutBtn.addEventListener('click', () => {
      localStorage.removeItem('session');
      location.href = 'login.html';
    });

    loadProfile();
  </script>
</body>
</html>
