<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>La Disquera ‚Äî Gestor Musical</title>
  <link rel="stylesheet" href="./style/styles.css" />
</head>
<body>
  <header class="topbar">
    <h1>üé∏ La Disquera</h1>
    <div class="controls">
      <input id="search-input" type="search" placeholder="Buscar banda, √°lbum..." />
      <select id="genre-filter">
        <option value="">Todos los g√©neros</option>
      </select>
      <button id="clear-search" class="btn">Limpiar</button>
    </div>
  </header>

  <main class="layout">
    <!-- PANEL DE BANDAS -->
    <section id="bands-section" class="section panel bandas active">
      <h2>Bandas</h2>

      <div class="card" id="new-band-form">
        <h3>Agregar nueva banda</h3>
        <form id="band-form">
          <div class="form-grid">
            <div class="form-group">
              <label for="band-name">Nombre de la banda</label>
              <input id="band-name" type="text" required autocomplete="off" />
            </div>
            <div class="form-group">
              <label for="band-genre">G√©nero musical</label>
              <input id="band-genre" type="text" required autocomplete="off" />
            </div>
          </div>

          <div class="form-group">
            <label for="band-bio">Biograf√≠a</label>
            <textarea id="band-bio" rows="3"></textarea>
          </div>

          <div class="upload-zone">
            <label for="band-img">Imagen de la banda</label>
            <input id="band-img" type="file" accept="image/*" />
            <img id="preview-img" src="" alt="Vista previa" class="preview hidden" />
          </div>

          <div class="youtube-section">
            <h4>üéµ Agregar canciones desde YouTube</h4>
            <p style="color:#9aa4b2; font-size:0.9rem; margin-bottom:12px;">
              Solo se usar√° el audio del video
            </p>
            <div class="youtube-input">
              <input type="text" id="youtube-url" placeholder="https://youtube.com/watch?v=..." autocomplete="off" />
              <button type="button" class="btn" id="add-youtube">Agregar</button>
            </div>
            <div id="youtube-list"></div>
          </div>

          <button type="submit" class="btn">Agregar banda</button>
        </form>
      </div>

      <div id="bands-list" class="grid"></div>
    </section>

    <!-- PANEL DE √ÅLBUMES -->
    <section id="albums-section" class="section panel albumes">
      <h2>√Ålbumes</h2>
      <div id="albums-list" class="grid"></div>
    </section>

    <!-- PANEL DE CANCIONES -->
    <section id="songs-section" class="section panel canciones">
      <h2>Canciones</h2>
      <div id="songs-list"></div>
    </section>
  </main>

  <footer class="footer">
    <small>Proyecto final ‚Äî JavaScript CoderHouse ‚Äî Autor: Lucas Alvarez</small>
  </footer>

  <!-- Toast container -->
  <div id="toast-container"></div>

  <!-- ============================================
       SCRIPTS - ORDEN CR√çTICO (NO CAMBIAR)
       ============================================ -->
  
  <!-- 1. API de YouTube (PRIMERO) -->
  <script src="https://www.youtube.com/iframe_api"></script>
  
  <!-- 2. App principal (gesti√≥n de bandas) -->
  <script src="app.js"></script>
  
  <!-- 3. M√≥dulos CORE (en este orden exacto) -->
  <script src="script/modules/albums-core.js"></script>
  <script src="script/modules/youtube-utils.js"></script>
  <script src="script/modules/modal-system.js"></script>
  
  <!-- 4. M√≥dulos de FORMULARIOS -->
  <script src="script/modules/albums-form.js"></script>
  <script src="script/modules/albums-save.js"></script>
  
  <!-- 5. M√≥dulo de RENDERIZADO -->
  <script src="script/modules/albums-render.js"></script>
  
  <!-- 6. M√≥dulo de AGREGAR CANCIONES (NUEVO) -->
  <script src="script/modules/albums-songs-manager.js"></script>
  
  <!-- 7. M√≥dulos de REPRODUCCI√ìN -->
  <script src="script/modules/player-audio.js"></script>
  <script src="script/modules/playlist-manager.js"></script>
  
  <!-- 8. Inicializaci√≥n (√öLTIMO) -->
  <script src="script/modules/albums-main.js"></script>
  
  <!-- 9. Callbacks y verificaci√≥n -->
  <script>
    console.log('üé¨ ============================================');
    console.log('üé¨ [index.html] TODOS LOS SCRIPTS CARGADOS');
    console.log('üé¨ ============================================');
    
    // Callback requerido por YouTube API
    function onYouTubeIframeAPIReady() {
      console.log('‚úÖ [YouTube API] API lista y funcionando');
    }
    
    // Verificar carga completa
    window.addEventListener('load', () => {
      console.log('üéâ ============================================');
      console.log('üéâ [index.html] P√ÅGINA COMPLETAMENTE CARGADA');
      console.log('üéâ ============================================');
      console.log('');
      console.log('üìä Verificando m√≥dulos cargados...');
      console.log('');
      
      const modules = {
        'STATE': !!window.STATE,
        'albumsCore': !!window.albumsCore,
        'albumsForm': !!window.albumsForm,
        'albumsSave': !!window.albumsSave,
        'albumsRender': !!window.albumsRender,
        'albumsSongsManager': !!window.albumsSongsManager,
        'youtubeUtils': !!window.youtubeUtils,
        'playerAudio': !!window.playerAudio,
        'playlistManager': !!window.playlistManager,
        'modalSystem': !!window.modalSystem,
        'albumsApp': !!window.albumsApp
      };
      
      console.table(modules);
      
      const missing = Object.entries(modules).filter(([_, loaded]) => !loaded);
      if (missing.length > 0) {
        console.error('‚ùå ============================================');
        console.error('‚ùå M√ìDULOS FALTANTES:', missing.map(([name]) => name));
        console.error('‚ùå ============================================');
      } else {
        console.log('‚úÖ ============================================');
        console.log('‚úÖ TODOS LOS M√ìDULOS CARGADOS CORRECTAMENTE');
        console.log('‚úÖ ============================================');
        console.log('');
        console.log('üí° Tips:');
        console.log('  - Usa Ctrl+D para debug info');
        console.log('  - Revisa los logs con emojis para tracking');
        console.log('  - Los √°lbumes del JSON deben aparecer');
        console.log('  - Bot√≥n "‚ûï Canciones" debe estar visible');
        console.log('');
      }
      
      // Verificar funci√≥n cr√≠tica
      if (typeof window.showAddSongsModal === 'function') {
        console.log('‚úÖ Funci√≥n showAddSongsModal disponible');
      } else {
        console.error('‚ùå Funci√≥n showAddSongsModal NO disponible');
      }
    });
  </script>
</body>
</html>